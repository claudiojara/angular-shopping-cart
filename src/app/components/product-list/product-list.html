<div class="product-grid" data-testid="product-grid">
  @for (product of products(); track product.id) {
    <mat-card class="product-card" [attr.data-testid]="'product-card-' + product.id">
      <img
        mat-card-image
        [src]="product.image"
        [alt]="product.name"
        [attr.data-testid]="'product-image-' + product.id"
      />

      <mat-card-header>
        <mat-card-title [attr.data-testid]="'product-name-' + product.id">{{
          product.name
        }}</mat-card-title>
        <mat-card-subtitle>
          <mat-chip class="category-chip" [attr.data-testid]="'product-category-' + product.id">{{
            product.category
          }}</mat-chip>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="product-description" [attr.data-testid]="'product-description-' + product.id">
          {{ product.description }}
        </p>
        <p class="product-price" [attr.data-testid]="'product-price-' + product.id">
          {{ product.price | currency }}
        </p>
      </mat-card-content>

      <mat-card-actions>
        <button
          mat-raised-button
          color="primary"
          (click)="addToCart(product)"
          [attr.data-testid]="'add-to-cart-' + product.id"
          aria-label="Agregar {{ product.name }} al carrito"
          class="add-to-cart-btn"
        >
          <mat-icon>add_shopping_cart</mat-icon>
          Agregar al Carrito
        </button>
      </mat-card-actions>
    </mat-card>
  }
</div>
