[
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "9431c39a-d99a-4cc7-906c-0dd4a7065355",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC001-User Registration Success",
    "description": "Verify that a new user can register successfully with valid email and password.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to the registration page (try direct /register path).\n        await page.goto(\"http://localhost:4200/register\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Fill the email, password, confirm password fields, then submit the registration form (send Enter to submit). Then the page state will be checked for registration success.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser+001@example.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[3]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Click the 'Registrarse' submit button to submit the registration form, then check the resulting page/state for registration success.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Registration Successful').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The test attempted to register a new user with a valid email and password and expected to see a 'Registration Successful' confirmation, but the success message did not appear.\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Registration verification result:\n- Inputs used: email=testuser+001@example.com, password=password123, confirm password=password123.\n- Actions performed: navigated to /register, filled email and both password fields, attempted submission via click (1) and Enter (1).\n- Observed outcome: The registration form is still displayed and the 'Registrarse' button is disabled (grey). No confirmation message, no redirect to an authenticated area, and the top navigation still shows 'Iniciar Sesión' (user not logged in). Therefore registration success could not be verified.\n- Possible causes to investigate: frontend validation preventing submission, backend/API not reachable, or a client-side error. Check browser console/network for failed requests and verify backend is running.\n- Recommendation: enable debugging (open console/network), try submitting again when backend is available, or attempt registration via API call to confirm server behavior.\nFinal status: registration not completed (success=false).",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253032990236//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.243Z",
    "modified": "2026-02-05T00:57:13.197Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "86f0127b-4d88-468b-a28a-5f7a70674189",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC002-User Registration Input Validation",
    "description": "Verify the registration validation for invalid email and password inputs.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the registration page (use direct URL because the current page has no interactive navigation elements).\n        await page.goto(\"http://localhost:4200/register\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Input an invalid email (missing '@') into the email field and fill short password and confirm password, then submit the form (Enter) to trigger validations.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('invalidemail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[3]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770252872475787//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.248Z",
    "modified": "2026-02-05T00:54:32.625Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "3fa4dd23-0406-45b8-b084-f45206047785",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC003-User Login Success",
    "description": "Verify that an existing user can log in successfully with correct credentials.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Allow the SPA to load (wait). If no UI appears, navigate directly to the login URL (/login).\n        await page.goto(\"http://localhost:4200/login\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Fill the email and password fields with valid credentials and submit the login form.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Iniciar Sesión' submit button to submit the login form and verify redirection to the product listing/home page.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of verification attempt:\n- Actions performed: navigated to /products, waited for SPA load, navigated to /login, filled email and password, toggled password visibility, and clicked the Iniciar Sesión submit button.\n- Observations: after submitting the form the app remained on the login page (URL still /login). No UI change indicating a successful login was observed (no user name, no logout control, no redirect to products/home). No visible error message was present on the form.\n- Conclusion: login with the provided credentials did not complete successfully in this session (success=false).\n- Suggested next steps to debug or retry: 1) Check browser devtools console and network tab for failed requests or errors during the login POST; 2) Confirm backend auth service is running and reachable; 3) Re-attempt submit or try different valid test credentials; 4) Try navigating to /products manually to see whether authentication state changes; 5) If tests should continue, provide permission to retry the submit or run full frontend test cases.\nIf the user wants a retry or further automated debugging (console/network capture), specify which action to take next.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770252914187318//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.254Z",
    "modified": "2026-02-05T00:55:14.376Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "1f788d65-31ae-46fc-a2c6-bf3d2b1ca477",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC004-User Login Failure with Invalid Credentials",
    "description": "Verify that login fails if incorrect email or password is entered.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to the login page (http://localhost:4200/login). No navigation links present on the current page, so use direct navigation.\n        await page.goto(\"http://localhost:4200/login\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Input the valid email and incorrect password into the form and submit the login form to verify an error is shown.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('wrongpassword')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Submit the login form by clicking the 'Iniciar Sesión' submit button, then verify an error message is shown indicating invalid credentials.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Invalid email or password').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: expected an error message indicating invalid credentials ('Invalid email or password') after submitting the login form with a valid email and incorrect password, but that message did not appear — login may have succeeded unexpectedly or the error text/selector changed\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Test objective: Verify that login fails when incorrect credentials are entered.\n\nActions taken:\n- Navigated to the login page (/login).\n- Entered email: example@gmail.com.\n- Entered password: wrongpassword.\n- Toggled password visibility once.\n- Clicked the 'Iniciar Sesión' submit button.\n- Searched page content for visible error/notification messages (Spanish & English phrases for login failure).\n\nResult:\n- No visible error, alert, or notification message indicating invalid credentials was found on the page after submission.\n- Page text snapshot (context) after submission: \"storeTiendAppinventory_2Productos shopping_cart 0CarritologinIniciar Sesión Iniciar Sesión Correo Electrónico email Contraseña lock visibility ¿No tienes cuenta?Regístrate\"\n\nConclusion:\n- The UI did not display an identifiable error message on the page after submitting incorrect credentials; therefore the requested assertion (login fails and shows an error message) could not be confirmed via the page content check. Marking the verification as failed for the UI-level assertion.\n\nRecommended next steps to diagnose why no error was observed:\n- Inspect network requests/responses for the login POST to verify server returned an authentication failure (e.g., 401/403 and error payload).\n- Check browser console for JS errors that might have prevented the error UI from rendering.\n- Verify whether the app uses transient UI elements (toasts/snackbars) that might be rendered outside the main DOM tree or removed quickly; attempt capturing immediately after submit or monitor DOM mutation.\n- Reattempt the test with a different invalid credential pair or with slow motion/wait to allow async UI to appear.\n\nTest status: FAILED (could not verify UI error message for invalid credentials).",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770252937733265//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.259Z",
    "modified": "2026-02-05T00:55:37.897Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "0978702b-80af-4a65-99a3-2e9b6c61a009",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC005-User Logout Success",
    "description": "Verify that an authenticated user can log out successfully.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Load the login page (app may not have fully loaded) so the login form becomes available and proceed with authentication.\n        await page.goto(\"http://localhost:4200/login\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Fill the email and password fields (indexes 307 and 305) with test credentials and click the login button (index 403).\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[4]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the form submit button to attempt authentication (click element index 309).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the login form using the visible inputs (index 604 and 602) and submit the form (send Enter) to attempt authentication.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Open the registration page to create a new account (click the \"Regístrate\" link).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/div[2]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the visible email and password inputs (indexes 1083 and 1088) and submit the login form (click index 1121).\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[4]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the visible form submit button 'Iniciar Sesión' (index 1072) to attempt authentication.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the visible email (index 1236) and password (index 1234) fields and submit the form (send Enter) to attempt authentication.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Open the registration page by clicking the 'Regístrate' link (index 1447) to create a new account so a valid login can be performed.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the registration page by clicking the visible 'Regístrate' link (index 1720) to create a new account.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the registration form (email, password, confirm password) and submit the form to create a new account.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[3]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Submit the registration form by clicking the 'Registrarse' button (index 1758) to create the account.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the visible registration inputs (1945, 1942, 1943) with example credentials and submit the form (send Enter) to create the account.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[3]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Fill the visible registration inputs (email index=2223, password index=2220, confirm password index=2221) and submit the form (send Enter).\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/mat-form-field[3]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Submit the registration form by clicking the 'Registrarse' button (index 2226) to create the account.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the login page so the newly created account can be used to authenticate (click the 'Inicia Sesión' link).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate back to the login page by clicking the 'Inicia Sesión' link so a login attempt can be performed with the created credentials.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-register/div/mat-card/mat-card-content/form/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the visible email (index 2876) and password (index 2881) inputs with example@gmail.com/password123 and submit the form by sending Enter to attempt authentication.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Fill the visible login inputs (email index=2982, password index=2980) and submit the form (send Enter) to attempt authentication, then check for authenticated UI (user menu).\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Fill visible login inputs (indexes 3214 and 3212) with example@gmail.com/password123 and submit the form to attempt authentication.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        # -> Open the registration page to (re)create an account so valid credentials can be used to log in (click 'Regístrate').\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/div[2]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Fill the visible login inputs (email index 3487, password index 3485) with example@gmail.com / password123 and submit the form to attempt authentication.\n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[1]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('example@gmail.com')\n        \n        frame = context.pages[-1]\n        # Input text\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/mat-form-field[2]/div[1]/div/div[3]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('password123')\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253574355114//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.264Z",
    "modified": "2026-02-05T01:06:14.469Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "ffd79660-4c9c-4302-9356-087dc6933e3c",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC006-Product Catalog Displays All Products",
    "description": "Verify that the product catalog page displays all 6 pre-loaded products with correct details and images.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770252848386973//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.270Z",
    "modified": "2026-02-05T00:54:08.510Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "f8fd735a-5aba-41e3-ae9c-b7002c2e0844",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC007-Product Details Retrieval by ID",
    "description": "Verify that product details can be fetched correctly by product ID from the backend.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to a product detail page to obtain backend response for a valid product ID (try /products/1).\n        await page.goto(\"http://localhost:4200/products/1\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Request product details using a valid product ID from the backend API (GET) and capture the response for assertion.\n        await page.goto(\"http://localhost:3000/products/1\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Retry the backend request by reloading the current backend endpoint page to determine if the backend becomes responsive (click the Reload button) and capture the response or error.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/div[1]/div[1]/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Retry the backend request by clicking the Reload button on the error page to attempt to get a valid response for GET /products/1.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/div[1]/div[1]/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Product details for ID 1').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: expected the product details for product ID 1 to be displayed (verifying backend returned the correct product data), but the details did not appear — the backend may have returned an error or the frontend failed to render the response.\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of verification attempt:\n- Frontend catalog page was visited and product list was extracted (6 items). Extracted data available in extracted_content_0.md.\n- Attempted to fetch product details from backend endpoint GET http://localhost:3000/products/1. The backend did not respond (browser shows: \"This page isn’t working - localhost didn’t send any data. ERR_EMPTY_RESPONSE\").\n- Reload was clicked twice; the error persisted. No backend JSON response was obtained.\n- Because the backend is unresponsive, assertions could not be performed: product-detail verification and 404 check remain unexecuted.\n\nResult: TEST INCOMPLETE (success=false). The backend must be started or network issues resolved before the product-detail API tests can be completed.\n\nSuggested next steps to the user:\n1) Verify the backend service is running on port 3000. If using a local dev server, run the appropriate start command (for example: `npm run start:api` or `cd backend && npm start` depending on project structure).\n2) Confirm there are no port conflicts and that the backend logs show it is listening on http://localhost:3000.\n3) After backend is up, re-run the product-detail requests: GET /products/1 (valid ID) and GET /products/99999 (or other invalid ID) to assert 404 behavior.\n4) If backend returns responses, resume the test: assert returned product fields (name, price, category, id) match the extracted catalog data in extracted_content_0.md.\n\nFiles collected:\n- extracted_content_0.md (product catalog extraction)\n\nIf assistance is needed to restart the backend or to re-run the tests after the server is up, provide instructions or allow retry.\n\nAttachments:\n\nextracted_content_0.md:\n<url>\nhttp://localhost:4200/products\n</url>\n<query>\nExtract all product entries visible on the page. For each product return: name, price, category (if present), any product detail link (href) or data-id attribute found in the HTML, and the index or text of any interactive element that appears to lead to product details. Provide results as a JSON array of objects. If no explicit ID or link is available, include the visible product title and any aria-labels on related buttons. Return links when present.\n</query>\n<result>\n[\n  {\n    \"name\": \"Laptop Premium\",\n    \"price\": \"$1,299.99\",\n    \"category\": \"Electrónica\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400\"\n  },\n  {\n    \"name\": \"Auriculares Bluetooth\",\n    \"price\": \"$249.99\",\n    \"category\": \"Audio\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400\"\n  },\n  {\n    \"name\": \"Smartphone Pro\",\n    \"price\": \"$899.99\",\n    \"category\": \"Móviles\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400\"\n  },\n  {\n    \"name\": \"Tablet Gráfica\",\n    \"price\": \"$599.99\",\n    \"category\": \"Diseño\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400\"\n  },\n  {\n    \"name\": \"Smartwatch Elite\",\n    \"price\": \"$349.99\",\n    \"category\": \"Wearables\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400\"\n  },\n  {\n    \"name\": \"Cámara Mirrorless\",\n    \"price\": \"$1,599.99\",\n    \"category\": \"Fotografía\",\n    \"detail_link\": null,\n    \"data_id\": null,\n    \"interactive_element\": \"add_shopping_cart Agregar al Carrito\",\n    \"image\": \"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400\"\n  }\n]\n</result>",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253003971861//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.275Z",
    "modified": "2026-02-05T00:56:44.075Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "41227bec-ad7f-447e-b3c5-e4d474f040c1",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC008-Add Product to Shopping Cart",
    "description": "Verify that the user can add a product to the shopping cart and the cart updates in real time.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the 'Agregar al Carrito' button for Laptop Premium (element index 99) to add the product to the shopping cart.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the shopping cart by clicking the cart button to inspect the cart contents and confirm the added product appears with correct quantity.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/177025289141618//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.281Z",
    "modified": "2026-02-05T00:54:51.524Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "0ea52cd8-dffc-4d92-b28d-9253505c09d2",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC009-Update Cart Item Quantity",
    "description": "Verify that the user can increment or decrement the quantity of an item in the shopping cart and changes persist.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to the shopping cart page (http://localhost:4200/cart) to locate cart items and quantity controls.\n        await page.goto(\"http://localhost:4200/cart\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the Products page using the 'Productos' button to add a product to the cart so quantity controls can be tested.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for 'Laptop Premium' to add one item, then open the Cart page to test quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Aumentar cantidad' (increase quantity) button for the Laptop Premium cart item, verify UI updates and persistence after a reload, then attempt to decrement the quantity and verify removal when it reaches zero.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[1]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page to add a product to the cart so quantity controls become available.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium, then open the Cart page to verify the item appears (prepare to test increment/decrement controls).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (use button index=1300), then open the Cart page (button index=1248) to verify the item appears so quantity controls can be tested.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Aumentar cantidad' (increase quantity) button for Laptop Premium (button index=1565) to increment quantity from 1 to 2.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[1]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate away and back to the Cart to verify the increased quantity persisted, then decrement the item twice (to 1 and to 0) and verify UI updates and final removal.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page (click 'Productos' button index=1745) to add a product to the cart and start the add/increment/persistence/decrement flow.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the product listing by clicking the 'Productos' button so a product can be added to the cart (click button index=1873).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index=1956) then open the Cart page (index=1883) so quantity controls can be tested.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item's 'Aumentar cantidad' (increase) button to change quantity from 1 to 2, extract the visible quantity and Total to confirm immediate UI update, then navigate to the Productos page so persistence can be verified after returning to the cart.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[1]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page so a product can be added to the cart (click 'Productos' button).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium, then open the Cart page to verify the item appears so quantity controls can be tested.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index=2806) then open the Cart (index=2754) to load the cart view for quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item's 'Aumentar cantidad' (increase) button, then extract the cart item's visible quantity and the Total price to confirm the immediate UI update.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[1]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page (product listing) so a product can be added to the cart.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium, then open the Cart page to load the cart view for quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index=3628) then open the Cart page by clicking 'Carrito' (index=3576) to load the cart and expose quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item's increase button to increment quantity, extract the visible quantity and Total to assert immediate UI update, then navigate away and back to assert persistence, then remove the item and assert cart is empty.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[1]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the product listing so a product can be added to the cart (click 'Productos' button).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium to add item to cart, then open the Cart page to test quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (button index=4453) to add one item, then open the Cart by clicking the 'Carrito' button (index=4401) to load the cart page and expose quantity controls.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/177025357480656//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.287Z",
    "modified": "2026-02-05T01:06:14.966Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "682df195-b457-454f-a5d9-6ec8417cb2a0",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC010-Remove Item from Shopping Cart",
    "description": "Verify that the user can remove an item from the shopping cart and updates are persisted.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to the shopping cart page (http://localhost:4200/cart) to load the cart UI so the remove action can be performed.\n        await page.goto(\"http://localhost:4200/cart\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the 'Productos' button to go to the products page and add a product to the cart (click element index 370).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add a product to the cart (click 'Agregar al Carrito' for a product) then navigate to the cart page to perform remove action.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page so a product can be added to the cart (click the 'Productos' button).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add a product to the cart by clicking 'Agregar al Carrito' for Laptop Premium (index 967), then open the cart page by clicking the 'Carrito' button (index 890) to prepare for the remove action.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index 1310) to add an item, then open the cart page by clicking 'Carrito' (index 1258) to prepare for the remove action.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item delete button (index 1583) to remove the item, then extract the cart page content to verify the item is removed and totals updated (UI check). After UI verification, plan backend persistence check (Supabase) if UI shows removal.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page to add a product again so a stable remove action can be performed (click the 'Productos' button). After navigation, add a product and then remove it and verify UI and backend.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add a product to the cart (Laptop Premium) by clicking its 'Agregar al Carrito' button, then open the cart page to perform the remove action and subsequent verifications.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index 2135) to add an item, then open the cart by clicking 'Carrito' (index 2083) so a remove test can be performed.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item delete button (index 2407) to remove the item, wait for the UI to update, then extract the cart page content to verify the item removal and updated totals. Afterwards attempt backend verification (Supabase) if accessible.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to Productos page so a product can be added to the cart (click the 'Productos' button).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add Laptop Premium to the cart from the products page, then open the cart page so a stable remove action can be attempted.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item delete button (index 2952) to remove the Laptop Premium item, then extract the cart page content to verify the item is removed and totals updated. After UI verification, attempt backend persistence check (Supabase) if accessible.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the products page by clicking the 'Productos' button so a product can be added to the cart for the remove/persistence test.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add Laptop Premium to the cart (click add button index 3161) then open the Cart page (click Cart button index 3089) to prepare for the remove action and verification.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item's delete button (index 3465), wait briefly for the UI to update, then extract the visible cart content (product names, quantities, per-item prices, totals, and any 'Tu carrito está vacío' message) to verify the item was removed. After UI verification, attempt Supabase/backend verification (if accessible) or report inability to access backend.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Productos' to open the products listing so an item can be added (then return to cart to remove and verify).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium then open the Cart page to perform a reliable remove action and subsequent verifications.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart item's delete button (index 3972) to remove Laptop Premium, then extract the visible cart content to verify the item removal and updated totals (and whether 'Tu carrito está vacío' appears). If UI shows removal, plan backend verification (Supabase) next; if backend access is not available from the app, report inability and provide instructions for backend verification.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page so a product can be added to the cart (click 'Productos' button) to start a fresh add -> remove -> verify sequence.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index 4181) then open the Cart page (click Cart button index 4109) to prepare for a stable remove action and verification.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index 4524) to add an item, then click the Cart button (index 4472) to open the cart page so the remove action and verifications can be performed.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the cart-item delete button (index 4796) to remove Laptop Premium, wait briefly for UI update, then extract the visible cart content (product names, quantities, per-item prices, line subtotal, Total, and any 'Tu carrito está vacío' message) to verify immediate UI removal and totals update.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/mat-list/mat-list-item/span/span/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Reload or navigate to a product or cart route to get a fresh SPA state and interactive elements so add->remove->verify sequence can be attempted. First step: load the products listing page to obtain working add-to-cart buttons.\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Add Laptop Premium to cart by clicking index 5117, then open the Cart page by clicking index 5064 to prepare for the remove action and verifications.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253580719828//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.293Z",
    "modified": "2026-02-05T01:06:20.942Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "825a3b85-60f9-4f39-a1c5-ba68205b1799",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC011-Clear Entire Shopping Cart",
    "description": "Verify that the user can clear all items from the shopping cart at once.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the shopping cart page by clicking the 'Carrito' button in the header (element index 56).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the Products page to add one or more items to the cart (click 'Productos' in the header).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Productos' button in the header (index 428) to navigate to the products page so items can be added to the cart.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add items to the cart by clicking 'Agregar al Carrito' for Laptop Premium (index 509) and Auriculares Bluetooth (index 531), then open the shopping cart by clicking 'Carrito' (index 438).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Vaciar Carrito' (Clear Cart) button in the shopping cart (element index 809).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/div/div[2]/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the Productos page to add items to the cart (click 'Productos' in header). Immediate action: click Productos (index 1011).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar al Carrito' for Laptop Premium (index 1093) and Auriculares Bluetooth (index 1115), then open the shopping cart by clicking 'Carrito' (index 1021) to proceed to the cart page.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Vaciar Carrito' (Clear Cart) button to remove all items from the cart UI.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/div/div[2]/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the Productos page so items can be added to the cart (click header 'Productos' button).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add Laptop Premium and Auriculares Bluetooth to the cart, then open the shopping cart page to proceed to the clear-cart action.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Vaciar Carrito' button (index 1988) to clear all items from the cart, then verify the UI shows an empty cart and total resets to $0.00, and extract UI state info to use for backend verification.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/div/div[2]/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the products page so items can be added again (click 'Productos' header) and then add items to cart for a fresh clear attempt.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Productos' header button to navigate to the Products page so items can be added for a fresh clear-cart test.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add Laptop Premium and Auriculares Bluetooth to the cart (use the visible add buttons) then open the shopping cart page to proceed with the clear-cart verification.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Vaciar Carrito' button to clear all items from the cart (use the visible button at index 2706).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/div/div[2]/button[1]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Carrito vacío').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: expected the cart to be cleared and show 'Carrito vacío' (indicating all items were removed and the total reset to zero), but the empty-cart message did not appear — the cart may still contain items or the UI/backend did not update\")\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of findings and next steps:\n\n1) Frontend/UI status: The shopping cart page currently displays:\n   - Heading: 'Carrito de Compras'\n   - Message: 'Tu carrito está vacío' and 'Agrega productos para comenzar tu compra'\n   - Visible cart count: 0\n   - No total price shown and no 'Vaciar Carrito' (Clear Cart) button present on the empty-cart UI.\n\n2) Attempts to reproduce clear-cart flow:\n   - Multiple attempts were made to add Laptop Premium and Auriculares Bluetooth to the cart and then click 'Vaciar Carrito'. Several attempts temporarily showed two items and total = $1,549.98, but subsequent UI state became empty and multiple attempts to click the clear button failed due to stale/uninteractable element indexes.\n   - Recorded clear-click failures: 4 failed click attempts on 'Vaciar Carrito' (element indexes became stale/uninteractable).\n   - No successful explicit 'Vaciar Carrito' click was recorded; the UI presently shows an empty cart but it cannot be established whether the empty state is a result of a successful clear action or transient/inconsistent frontend behavior.\n\n3) Backend (Supabase) verification: Not performed. Backend state cannot be verified from the current browser page because no Supabase dashboard/API access is available in this session.\n\nWhat is required to complete verification (choose one):\nA) Provide Supabase access details so backend can be queried here:\n   - Supabase project URL (e.g., https://xyzcompany.supabase.co)\n   - Supabase API key: either anon/public key for read access or service_role key if required (note: service_role is sensitive)\n   - The user identifier to check (user_id, email, or session token) so the correct cart rows can be queried.\n   - Optional: the exact table name(s) for cart storage (e.g., cart_items, carts).\n\n   With those, the following verification will be executed:\n   - Query cart_items (or equivalent) for the user: SELECT * FROM cart_items WHERE user_id = '<user_id>'\n   - Confirm zero rows (cart cleared) and report results. If rows exist, return details (product ids, quantities) to correlate with frontend.\n\nB) If Supabase dashboard access is not to be shared here, run one of these SQL snippets in Supabase SQL editor and share the results:\n   - SELECT * FROM cart_items WHERE user_id = '<user_id>';  -- expect 0 rows\n   - OR, if schema differs: SELECT * FROM carts WHERE user_id = '<user_id>' OR SELECT * FROM carrito WHERE user_id = '<user_id>'\n\nC) If prefer frontend-only verification: provide steps to reproduce reliably (e.g., ensure no interception by service worker, hard-reload, or provide test account credentials) so the add → open cart → click 'Vaciar Carrito' sequence can be re-attempted with fresh element indexes and the clear button click can be validated.\n\nConclusion and status: End-to-end clear-cart verification is incomplete. Frontend currently shows an empty cart, but no successful clear action was recorded and backend state is unverified. To finish verification, supply Supabase access details (or run the provided SQL queries and share results), or provide instructions/credentials to reproduce the flow reliably in the frontend. Once backend access or reproducible frontend steps are provided, the verification will be completed and a success/failure result reported.\n\nIf further action is desired, please provide either: (1) Supabase project URL + API key + user identifier; or (2) Supabase SQL query results for the provided snippets; or (3) test account instructions to reproduce the flow in the frontend. Without one of these, backend verification cannot be completed here.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253275262977//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.299Z",
    "modified": "2026-02-05T01:01:15.467Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "a1196f24-da64-4d6e-a4ec-e899cd8507dd",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC012-Cart Totals and Badge Accuracy",
    "description": "Verify that the total price and item counts in the cart and navigation badge are calculated and displayed correctly for various item quantities.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Add items to the cart with quantities: Laptop = 2, Auriculares Bluetooth = 2, Smartphone = 1. Then open the cart page to verify totals and navigation badge.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add the remaining items to reach the desired quantities (Auriculares +1, Smartphone +1), then open the cart page to verify totals and the navigation badge.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[3]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar Auriculares' (index 571), click 'Agregar Smartphone' (index 605), then open the cart by clicking 'Carrito' (index 487) to verify totals and badge on the cart page.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[3]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Navigate to the Products page by clicking the 'Productos' button, then add the required products with the desired quantities and return to the cart to verify totals and the navigation badge.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Add products with quantities: Laptop x2, Auriculares Bluetooth x2, Smartphone x1, then open the cart page to verify displayed totals and navigation badge count.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar Auriculares' (index 1112), then 'Agregar Smartphone' (index 1134), then open the cart by clicking the shopping cart button (index 1018) so the cart page can be extracted and totals/badge verified.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[3]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Restore the Products page to a fully interactive state (re-load/navigate) so remaining add-to-cart actions can be performed, then re-open the cart to verify totals and nav badge.\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Add products with quantities: Laptop (2), Auriculares Bluetooth (2), Smartphone (1) by clicking the product 'Agregar al Carrito' buttons, then open the cart via the 'Carrito' button to verify displayed per-line subtotals, total price, and navigation badge count.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click 'Agregar Auriculares' (index 1848), then 'Agregar Smartphone' (index 1882), then open the cart by clicking 'Carrito' (index 1764) so the cart page can be extracted and totals/nav badge verified.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[3]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        ```\n        try:\n            await expect(frame.locator('text=5').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: expected the navigation toolbar badge to display total item count '5' (Laptop x2, Auriculares Bluetooth x2, Smartphone x1) indicating items were added and cart totals calculated; the badge or cart total did not appear or was incorrect\")\n        ```\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of verification (partial):\n\n1) Successful verification run (performed):\n- Items added (persistent state at time of verification):\n  - Laptop Premium — unit_price: 1299.99, quantity: 2, line_subtotal: 2599.98\n  - Auriculares Bluetooth — unit_price: 249.99, quantity: 2, line_subtotal: 499.98\n  - Smartphone Pro — unit_price: 899.99, quantity: 1, line_subtotal: 899.99\n- Displayed cart_total: 3999.95\n- Displayed navigation badge count: 5\n- Computation check: 1299.99*2 + 249.99*2 + 899.99*1 = 2599.98 + 499.98 + 899.99 = 3999.95 (matches displayed cart_total). Navigation badge (2 + 2 + 1 = 5) matches displayed nav_badge_count.\n\n2) Observed instability and unexpected change:\n- After the successful verification extraction above, the cart page later displayed as empty (screenshot and current page state: 'Tu carrito está vacío'). This indicates the cart/session state changed after verification. Two failed click attempts due to stale/uninteractable elements were recorded earlier (indexes 124 and 1112) and may indicate timing/state issues.\n\n3) Result and next steps:\n- The numeric verification for the tested scenario passed (per-line subtotals, cart total, and nav badge matched expected calculations).\n- Overall task 'Verify that totals and nav badge are calculated and displayed correctly for various quantities' is only partially complete: 1 of 3 planned scenarios completed and verified. Remaining: 2 scenario verifications not performed.\n- Recommendation: if full test coverage is required, re-run the two remaining scenarios and investigate why the cart state cleared (session persistence or frontend state reset). Consider adding short waits between clicks, re-querying element indices before interactions, or using a fresh tab to avoid stale element issues.\n\n4) Extracted JSON from the successful verification run (numbers normalized):\n{\n  \"items\": [\n    {\"name\": \"Laptop Premium\", \"unit_price\": 1299.99, \"displayed_quantity\": 2, \"displayed_line_subtotal\": 2599.98},\n    {\"name\": \"Auriculares Bluetooth\", \"unit_price\": 249.99, \"displayed_quantity\": 2, \"displayed_line_subtotal\": 499.98},\n    {\"name\": \"Smartphone Pro\", \"unit_price\": 899.99, \"displayed_quantity\": 1, \"displayed_line_subtotal\": 899.99}\n  ],\n  \"cart_total\": 3999.95,\n  \"nav_badge_count\": 5\n}\n\nFinal status: PARTIAL. Not all scenario verifications completed due to session/cart state instability. Set success=false because remaining scenarios remain to be executed.\n",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253206458415//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.306Z",
    "modified": "2026-02-05T01:00:06.653Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "6826b88d-2aea-44f2-ade7-ebeed39ada02",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC013-Checkout Process Success",
    "description": "Verify that the checkout process completes successfully and clears the cart afterwards.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Add items to the shopping cart (click 'Agregar al Carrito' for Laptop Premium then Auriculares Bluetooth), then open the Cart page via the top 'Carrito' button.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[1]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-product-list/div/mat-card[2]/mat-card-actions/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Proceder al Pago' button to initiate the checkout flow (expect a confirmation alert/modal showing the total).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-cart/div/mat-card/mat-card-content/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of results:\n- Frontend checkout: SUCCESS. The checkout action triggered a confirmation alert reporting the total 1549.98 (alert text: '¡Gracias por tu compra! Total: 1549.98'). The browser auto-closed multiple identical alerts (observed in browser logs).\n- UI post-checkout: SUCCESS. Cart page shows the empty-cart message: 'Tu carrito está vacío'.\n- Supabase/backend verification: NOT PERFORMED. No interactive elements or credentials on the current page allow direct verification of the Supabase backend state. To verify the backend, perform one of the following externally:\n  1) Query Supabase REST/SQL API for the cart table for the test user, e.g. using curl:\n     curl -H \"apikey: <SERVICE_ROLE_KEY>\" -H \"Authorization: Bearer <SERVICE_ROLE_KEY>\" \"https://<PROJECT>.supabase.co/rest/v1/cart?user_id=eq.<TEST_USER_ID>\"\n     Expect zero items returned for the user.\n  2) Use the Supabase SQL editor:\n     SELECT * FROM carts WHERE user_id = '<TEST_USER_ID>';\n     Expect no rows or an empty cart record.\n  3) Check Supabase Auth + Realtime logs in the Supabase dashboard for the test user's cart changes.\n\nIf backend verification is required to complete the test, provide Supabase project URL and a test API key (or grant access) so the verification can be performed. Current status: overall frontend test passes but backend verification is pending. Stopping now as requested.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770252903358004//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.312Z",
    "modified": "2026-02-05T00:55:03.495Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "05206274-a39f-4e14-955a-835c6ac9a0a9",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC014-Navigation Routes Load Correct Components",
    "description": "Verify that navigation links load the correct components for products, cart, login, and registration pages with active states updated.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the 'Productos' navigation link to confirm it becomes active and the product listing is shown, then navigate to the Cart page to verify the Cart component and active state.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Productos' navigation link to confirm the Product listing component loads and the Productos link is marked active.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Productos' navigation link (use current index 437) to load the product listing and verify the Productos link becomes active.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Productos' navigation link to ensure it is active, then navigate to the 'Carrito' link to load and verify the Cart component and its active state.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Iniciar Sesión' (Login) navigation link (index 822) to load the Login component and verify the link becomes active.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[4]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Click the 'Regístrate' link (index 1163) to load the Registration component and verify the link becomes active.\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/main/app-login/div/mat-card/mat-card-content/form/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253013377049//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.319Z",
    "modified": "2026-02-05T00:56:53.524Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "0741c786-50b7-48da-adbb-2fb9ffc7c1a4",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC015-Handle Invalid Item Update in Cart",
    "description": "Verify error handling when attempting to update the quantity of a cart item that does not exist.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Attempt to update quantity of a non-existent cart item via backend API and observe response (expect HTTP 404).\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate to the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 and inspect the HTTP response (status code and response body) to verify that a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Navigate directly to the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 and capture the HTTP response (status code and body) to verify a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab and capture the HTTP response (status code and body) to verify that a 404 Not Found is returned.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab and capture the HTTP response (status code and response body) to verify whether a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab and capture the HTTP response (status code and response body) to verify whether a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab and capture the HTTP response (status code and body) to verify a 404 Not Found.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Open the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab and capture the HTTP response (status code and response body) to verify whether a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the 'Carrito' (shopping cart) button to open the cart UI and attempt the update via UI (alternative path to trigger/observe backend error).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the Productos page (click 'Productos') to load products so a UI-driven alternative approach can be used (add an item then test update flows or find a way to provoke/capture the backend 404).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/app-root/mat-toolbar/mat-toolbar-row/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open the backend API endpoint http://localhost:4200/api/cart/items/999?quantity=5 in a new tab using a direct navigation (as a last-resort method) and capture the HTTP response (status code and body) to verify whether a 404 Not Found is returned for updating a non-existent cart item.\n        await page.goto(\"http://localhost:4200/api/cart/items/999?quantity=5\", wait_until=\"commit\", timeout=10000)\n        \n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        ```\n        try:\n            await expect(frame.locator('text=Item not found').first).to_be_visible(timeout=3000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Expected an 'Item not found' message confirming the system returned a 404 when attempting to update the quantity of a non-existent cart item (id 999), but no such message appeared — backend may not be returning 404 or the UI failed to surface the error.\")\n        ```\n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Summary of verification attempt and next steps:\n\nWhat was attempted:\n- Reproduced the app UI and opened the Cart (clicked 'Carrito'); cart is empty (message: 'Tu carrito está vacío').\n- Repeated direct navigations to the backend endpoint /api/cart/items/999?quantity=5 from the browser (in multiple new tabs) to capture the HTTP response. These navigations repeatedly did not yield a captured HTTP status or response body in the automated environment (5 attempts, 0 captures).\n\nResult:\n- Unable to confirm that the backend returns a 404 Not Found for updating a non-existent cart item because the automated browser navigations did not record the HTTP response. The UI path is confirmed (cart is empty) but the API-level verification (expected 404) remains unverified.\n\nWhy this likely occurred:\n- Direct browser navigations to the API endpoint in this automation environment did not surface the HTTP response (status/body) for inspection. This can happen if the endpoint requires a specific HTTP method (PUT/PATCH) rather than GET, if the server rejects direct navigation, or if network responses are not exposed to the page context by the automation interface.\n\nRecommended next steps to obtain a definitive verification (pick one):\n1) Use curl or Postman to call the API and inspect status & body. Example commands to try (adjust method if API expects PUT/PATCH):\n   - curl -i -X PUT \"http://localhost:4200/api/cart/items/999?quantity=5\"\n   - curl -i -X PATCH \"http://localhost:4200/api/cart/items/999\" -d \"{\\\"quantity\\\":5}\" -H \"Content-Type: application/json\"\n   - curl -i \"http://localhost:4200/api/cart/items/999?quantity=5\"   (if API accepts GET with query)\n   Expectation: HTTP/1.1 404 Not Found with a JSON error body indicating item not found.\n\n2) Enable network capture in the test harness (or browser devtools) and repeat the request from the web app or direct navigation to capture the full HTTP response (status and body).\n\n3) Check backend/server logs for request handling of item id 999 to see the service response and confirm the 404 handling.\n\n4) If the goal is to test via the UI only: add a product to the cart, then attempt to issue an update request for a non-existent item id (if the UI allows id-based updates) or simulate the backend call via browser console fetch (example):\n   fetch('/api/cart/items/999?quantity=5', { method: 'PUT' }).then(r => r.text().then(t => console.log(r.status, t))).catch(console.error)\n   Note: Using console fetch requires the automation environment to allow execution of page JS.\n\nIf the user wants, the next automated action options are:\n- Attempt a different HTTP method navigation (PUT/PATCH) if supported by the automation (may require a different tool). NOTE: current automation only supports normal navigations and cannot craft arbitrary request methods reliably.\n- Stop and provide these external commands and checks for an operator to run locally.\n\nConclusion:\n- The automated environment could not capture the API response; verification of the 404 Not Found for updating a non-existent cart item is not complete. The above recommended steps will produce a definitive verification.\n\nIf a specific approach is preferred (curl vs Postman vs server logs vs console fetch), indicate which one and permission to proceed (or provide environment credentials if the automation should attempt a different network method).",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253107418761//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.325Z",
    "modified": "2026-02-05T00:58:27.537Z"
  },
  {
    "projectId": "8a4f20ad-5c38-486d-b04f-1e02dcb1349a",
    "testId": "123d6aaf-e3f0-42bf-8bd8-317df2f08591",
    "userId": "74a81458-8061-709e-52f0-b04f7b7a6fc2",
    "title": "TC016-Handle Removing Non-Existent Item from Cart",
    "description": "Verify error handling when attempting to remove a cart item that does not exist.",
    "code": "import asyncio\nfrom playwright import async_api\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n\n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n\n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n\n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n\n        # Open a new page in the browser context\n        page = await context.new_page()\n\n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n\n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n\n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n\n        # Interact with the page elements to simulate user flow\n        # -> Navigate to http://localhost:4200/products\n        await page.goto(\"http://localhost:4200/products\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Request the backend cart endpoint for a non-existent item to observe the response (expect 404).\n        await page.goto(\"http://localhost:3000/api/cart/99999\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Retry the request by reloading the backend endpoint page (click the Reload button). If reload still fails, try alternative approach (open new tab or report website issue).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/div[1]/div[1]/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        # -> Open a new tab and retry requesting the backend endpoint http://localhost:3000/api/cart/99999 to observe whether it returns 404 or still fails.\n        await page.goto(\"http://localhost:3000/api/cart/99999\", wait_until=\"commit\", timeout=10000)\n        \n        # -> Click the Reload button on the current page (index 324) to retry the backend request and see if the API responds (last allowed reload attempt).\n        frame = context.pages[-1]\n        # Click element\n        elem = frame.locator('xpath=html/body/div[1]/div[1]/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n        await asyncio.sleep(5)\n\n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n\nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/74a81458-8061-709e-52f0-b04f7b7a6fc2/1770253512864418//tmp/test_task/result.webm",
    "created": "2026-02-05T00:52:54.332Z",
    "modified": "2026-02-05T01:05:12.998Z"
  }
]
